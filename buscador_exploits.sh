#!/bin/bash

greenColour="\e[0;32m\033[1m"
endColour="\033[0m\e[0m"
redColour="\e[0;31m\033[1m"
blueColour="\e[0;34m\033[1m"
yellowColour="\e[0;33m\033[1m"
purpleColour="\e[0;35m\033[1m"
turquoiseColour="\e[0;36m\033[1m"
grayColour="\e[0;37m\033[1m"
cleancolor="echo -e "${endColour}""

programs() {
	
		clear; tput civis
		echo -e "${greenColour}[+]$grayColour Dependencias \n"
		sleep 1 
		test -f /usr/bin/git

			if [ "$(echo $?)" -eq 0 ]; then
				echo -e "${greenColour}[+]$grayColour git"
				sleep 0.1
			else
				test -f /usr/sbin/git
				sbin=$(echo $?)
				if [ "$sbin" -eq 0 ]; then
					echo -e "${greenColour}[+]$grayColour git"
					sleep 0.1
				else
					echo -e "${blueColour}[*]$grayColour Installing git..." 
					sudo apt-get install git -y > /dev/null 2>&1
				
				fi
			fi

		test -f /usr/bin/searchsploit
		
			if [ "$(echo $?)" -eq 0 ]; then
				echo -e "${greenColour}[+]$grayColour searchsploit"
				sleep 0.1
			else
				test -f /usr/sbin/searchsploit
				sbin=$(echo $?)
				if [ "$sbin" -eq 0 ]; then
					echo -e "${greenColour}[+]$grayColour searchsploit"
					sleep 0.1
				else
					echo -e "${blueColour}[*]$grayColour Installing searchsploit..." 
					git clone https://gitlab.com/exploit-database/exploitdb.git && cd exploitdb/ && mv * /usr/bin && cd .. && rm -r exploitdb/ > /dev/null 2>&1
					cd $pathmain
				fi
			fi
		sleep 1
}

download() {
	sleep 1
	echo -ne "${blueColour}[?]$grayColour Path del Exploit para descargar (Eje: Exploit.py): " && read downloads
	searchsploit -m $downloads > /dev/null 2>&1
	test -f ${pathmain}/${downloads}*
		if [ "$(echo $?)" -eq 0 ]; then
			echo -e "\n${greenColour}[+]$grayColour Exploit $downloads descargado"
			sleep 1
		else
			echo -e "\n${redColour}[!]$grayColour Error en la descarga de $downloads \n"
			sleep 2
			download
		fi
}
search() {
	clear; tput cnorm
	echo -ne "$blueColour[?]$grayColour Nombre del Exploit: " && read search
	searchsploit $search
	download
}

if [ $(id -u) -ne 0 ]; then
	echo -e "$redColour\n\n[!]$grayColour Tienes que ser root -> (sudo $0)\n"
	$cleancolor
	exit 1
else
	pathmain=$(pwd)
	tput civis; clear
	programs
	search
fi


